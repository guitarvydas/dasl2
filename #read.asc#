asc [read](src) >> (index (atom space modified))
    $inject (src) >> [trim leading spaces](src)
    $wait
    $return (index (atom space))

    components
        [trim leading spaces](src) >> (text)
	[$1](text) >> (no) (yes)
	[read atom](start) >> (answer)
	[read list](start) >> (answer)
    end components

    connections
        [$self](src) >> [trim leading spaces](src)
	[trim leading spaces](text) >> [$1](text)
	[$1](no) >> [read atom](start)
	[$1](yes) >> [read list](start)
        [read atom](answer) >> [$self](index)
        [read list](answer) >> [$self](index)
    end connections

end [read]

---

asc [$1](text) >> (yes) (no)
    $if ?(lookahead lpar)(text) $then
        $send text >> (no)
    $else
        $send text >> (yes)
    $end if
end [$1]

asc [read atom](text) >> (answer)
    $send @read-atom(text) >> answer
end [read atom]

asc [read list](text) >> (answer)
    $send @read-list(text) >> answer
end [read atom]